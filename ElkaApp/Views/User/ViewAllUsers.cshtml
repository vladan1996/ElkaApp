@{
    ViewBag.Title = "ViewAllUsers";
}
<style>
    .userContainer {
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    th {
        width: 150px;
        height: 65px;
        text-align: center;
        font-weight: normal;
    }

    table, th, td {
        border: 1px solid;
    }

    h1 {
        margin-bottom: 30px;
        margin-top: 40px;
    }

    button {
        border: none;
        background-color: white;
    }
</style>
<div class="userContainer">
    <h1>USERS</h1>

    <table id="users">
        <tr>
            <th></th>
            <th>FULL NAME</th>
            <th>BIRTHDATE</th>
            <th>STREET</th>
            <th>CITY</th>
            <th>PHONE, EMAIL</th>
            <th>PROFESSION</th>
        </tr>

    </table>
</div>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script>
    
    localStorage.clear();
    const map1 = new Map();
    console.log("ja ")
    $.ajax({
        type: "GET",
        url: "/User/GetUsers",
        dataType: "json",
        success: function (rez) {
            console.log(rez)
            if (rez != null) {
                var i = 0;
                const table = document.getElementById("users");
                for (i = 0; i < rez.length; i++) {
                    var tr = document.createElement("tr");
                    var th = document.createElement("th");
                    var btn1=document.createElement("button");
                    var btn2=document.createElement("button");
                    var fullname = document.createElement("th");
                    var birthdate = document.createElement("th");
                    var street = document.createElement("th");
                    var city = document.createElement("th");
                    var phoneEmail = document.createElement("th");
                    var profession = document.createElement("th");
                    table.appendChild(tr);
                    tr.appendChild(th).appendChild(btn1);
                    tr.appendChild(th).appendChild(btn2);
                    tr.appendChild(fullname);
                    tr.appendChild(birthdate);
                    tr.appendChild(street);
                    tr.appendChild(city);
                    tr.appendChild(phoneEmail);
                    tr.appendChild(profession);
                    fullname.innerText = rez[i].Fullname;
                    birthdate.innerText = rez[i].Birthdate;
                    street.innerText = rez[i].Street;
                    city.innerText = rez[i].City;
                    phoneEmail.innerText = ((rez[i].Phone==null)?"":rez[i].Phone) + rez[i].Email;
                    profession.innerText = rez[i].Profession;
                    btn1.innerText = "EDIT";
                    /*btn1.value = rez[i].UserID;*/
                    console.log(btn1.value);
                    btn2.value = rez[i].UserID;
                    btn2.innerText = "DELETE";
                    btn1.style = "color:blue";
                    btn2.style = "color:red";
                    map1.set(rez[i].UserID, btn1)
                    
                }
                console.log(map1)

                for (const [key, values] of map1.entries()) {

                    values.addEventListener('click', () => {
                        console.log(window.location)
                        localStorage.setItem("UserID", key)
                        location.replace(location.origin + "/User/updateUserByAdmin")

                    })
                

                }
            }
           
        },
        error: (err) => {
            console.log("err");
            console.log(err)
        }
    });

</script>